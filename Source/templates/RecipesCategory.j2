{% extends "Base.j2" %}

{% block title %}{{ category }} — Recipes — Grocery Guru{% endblock %}

{% block content %}
	<div class="card">
		<p style="margin: 0 0 1rem 0;"><a href="{{ url_for('recipes_index') }}">← Back to Recipes</a></p>
		<h1>{{ category }}</h1>
		{% if recipes %}
			<ul class="item-list">
				{% for recipe in recipes %}
					<li class="item-list-row">
						<a href="{{ url_for('recipe_detail', recipe_id=recipe.id) }}" class="item-list-link">
							<span class="item-name">{{ recipe.title }}</span>
						</a>
						<form method="post" action="{{ url_for('delete_recipe', recipe_id=recipe.id) }}" class="item-delete-form" onsubmit="return confirm('Delete this recipe?');">
							<input type="hidden" name="redirect_to" value="{{ url_for('recipes_by_category', category=category) }}">
							<button type="submit" class="btn btn-danger btn-sm" aria-label="Delete {{ recipe.title }}">
								<svg class="trash-icon" viewBox="0 0 24 24" width="18" height="18">
									<path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
								</svg>
							</button>
						</form>
					</li>
				{% endfor %}
			</ul>
		{% else %}
			<p class="text-muted">No recipes in {{ category }} yet. <a href="{{ url_for('add_recipe') }}">Add your first recipe</a>.</p>
		{% endif %}
		<div class="nav-links">
			<a href="{{ url_for('add_recipe') }}">Add recipe</a>
		</div>
	</div>
{% endblock %}
