{% extends "Base.j2" %}

{% block title %}{{ ingredient.name }} — Grocery Guru{% endblock %}

{% block content %}
	<div class="card">
		<p style="margin: 0 0 1rem 0;"><a href="/Pantry/{{ current_user.id }}">← Back to pantry</a></p>
		<h1>{{ ingredient.name }}</h1>
		<h2>Edit pantry item</h2>

		<form method="post" action="{{ url_for('pantry_item', item_id=item_id) }}" class="pantry-item-form">
			<input type="hidden" name="action" value="update">
			<div class="form-group">
				<label for="quantity">Quantity</label>
				<input type="number" id="quantity" name="quantity" min="1" max="9999" value="{{ inv_item.count }}" required>
			</div>
			<div class="form-group">
				<label for="expiration_date">Expiration date <span class="text-muted">(optional)</span></label>
				<input type="date" id="expiration_date" name="expiration_date" value="{{ expiration_date_val }}" placeholder="YYYY-MM-DD">
			</div>
			<div class="form-group">
				<label for="notes">Notes <span class="text-muted">(optional)</span></label>
				<textarea id="notes" name="notes" rows="3" placeholder="Add notes about this item...">{{ notes_val }}</textarea>
			</div>
			<div class="form-actions">
				<button type="submit" class="btn btn-primary">Save changes</button>
			</div>
		</form>

		<div class="pantry-item-meta" style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border);">
			<p class="text-muted" style="font-size: 0.9rem; margin: 0 0 0.5rem 0;">
				{% if date_purchased_str %}
					Added {{ date_purchased_str }}
				{% endif %}
			</p>
			<form method="post" action="{{ url_for('pantry_item', item_id=item_id) }}" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this item from your pantry?');">
				<input type="hidden" name="action" value="delete">
				<button type="submit" class="btn btn-danger" aria-label="Delete item">
				<svg class="trash-icon" viewBox="0 0 24 24" width="20" height="20">
					<path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
				</svg>
			</button>
			</form>
		</div>
	</div>
{% endblock %}
